{% extends "base.html" %}

{% block head %}
{% endblock %}

{% block page_title %} Datasets {% endblock %}

{% block page_list %}
<li><a href="#"> Dashboard </a></li>
<li class="active"> Datasets </li>
{% endblock %}

<!-- Content -->

{% block content %}

<div class="row" ng-app="mlt_app" ng-controller="all_jobs_controller as jc" ng-cloak>
  {[ jc.dataset_jobs = (jobs | filter:is_dataset);'' ]}
  <div ng-controller="ds_controller">

    <div class="animated fadeIn">
      <div class="col">
        <div class="card">
          <div class="card-body">
            <div align="justify">
              <button type="button" class="btn btn-primary" onclick="window.location.href='{{ url_for('digits.dataset.images.classification.views.new') }}';">New Dataset</a></button>
            </div>



            <table class="table">
              <col ng-repeat="field in fields"
                   ng-style="$index == 0 ? '{}' : {'width':visualLength(field.name, field.min_width) + 'px'}">
              <thead>
                <tr>
                  <th scope="col" ng-repeat="field in fields" ng-if="field.show">
                    {[ field.name ]}
                  </th>
                </tr>
              </thead>
              <tbody ng-if="jc.dataset_jobs.length">
                <tr ng-repeat-start="job in jc.dataset_jobs" ng-hide="true"></tr>
                <tr ng-attr-id="{[ job.id ]}">
                  <td><dg-name></dg-name></td>
                  <td>{[ job.backend ]}</td>
                  <td>{[ job.status ]}</td>
                  <td start="{[ job.submitted ]}">
                    <div ng-if="!is_today(job.submitted)" title="{[ job.submitted * 1000 | date:'medium' ]}">
                      {[ job.submitted * 1000 | date:'MMM d, yy' ]}
                    </div>
                    <div ng-if="is_today(job.submitted)" title="{[ job.submitted * 1000 | date:'medium' ]}">
                      {[ job.submitted * 1000 | date:'h:mm a' ]}
                    </div>
                  </td>
                </tr>
                <tr ng-repeat-end ng-hide="true"></tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock %}
